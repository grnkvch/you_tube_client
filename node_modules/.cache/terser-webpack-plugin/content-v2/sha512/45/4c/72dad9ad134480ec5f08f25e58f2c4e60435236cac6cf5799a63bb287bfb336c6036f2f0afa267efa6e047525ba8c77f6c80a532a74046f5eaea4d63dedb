{"code":"!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=0)}([function(e,t,i){\"use strict\";i.r(t);const s=new class{constructor(){this.resultCollection=null,this.nextPageToken=null}search(e){let t=null;return t=!e&&this.nextPageToken?`https://www.googleapis.com/youtube/v3/search?key=AIzaSyAC4vO7bJ2xG4KXEXSX6fRF4Oer5rk6Clc&type=video&part=snippet&maxResults=20&q=${e}&pageToken=${this.nextPageToken}`:`https://www.googleapis.com/youtube/v3/search?key=AIzaSyAC4vO7bJ2xG4KXEXSX6fRF4Oer5rk6Clc&type=video&part=snippet&maxResults=20&q=${e}`,fetch(t).then(e=>e.json()).then(e=>{this.nextPageToken=e.nextPageToken;let t=e.items.map(e=>e.id.videoId).join();return fetch(`https://www.googleapis.com/youtube/v3/videos?part=statistics,snippet&id=${t}&key=AIzaSyAC4vO7bJ2xG4KXEXSX6fRF4Oer5rk6Clc`)}).then(e=>e.json()).then(e=>this.parseResult(e))}parseResult(e){let t=[],i=e.items.length;for(let s=0;s<i;s++){let i=e.items[s],n={};n.viewCount=e.items[s].statistics.viewCount,n.title=i.snippet.title,n.author=i.snippet.channelTitle,n.thumbnailUrl=i.snippet.thumbnails.medium.url,n.publishedAt=new Date(Date.parse(i.snippet.publishedAt)),n.description=i.snippet.description,n.url=`https://www.youtube.com/watch?v=${i.id}`,t.push(n)}return this.resultCollection?this.resultCollection.concat(t):this.resultCollection=t.slice(),this.resultCollection}free(){this.resultCollection=null,this.nextPageToken=null}},n=new class{constructor(){this.inputElement=null,this.searchForm=null}render(e){const t=document.createElement(\"header\");t.innerHTML='<form class=\"search-form\">\\n    <input class =\"search-form__input\" autofocus placeholder=\"Search\">\\n    <button class =\"search-form__button\">RUN</button>\\n    </form>',this.searchForm=t.querySelector(\".search-form\"),this.inputElement=t.querySelector(\".search-form__input\"),document.querySelector(e).appendChild(t)}getValue(){return this.inputElement.value}},a=new class{constructor(e){this.searchMethod=e.search,this.collection=[],this.mainSection=document.createElement(\"main\"),this.mainSection.classList.add(\"main-content\"),this.mainSection.innerHTML='<section class=\"slide-bar\">\\n                                  <div class=\"slide-bar__slide-wrapper\">\\n\\n                                  </div>\\n                                  </section>\\n                                  <nav class=\"pagination\">\\n                                    <i class=\"pagination__arrow-left pagination__icon icon\" ></i>\\n                                    <div class=\"pagination__dot-container\">\\n                                      <div class=\"pagination__dot-wrapper\">\\n\\n                                      </div>\\n                                    </div>\\n                                    <i class=\"pagination__arrow-right pagination__icon icon\"></i>\\n                                  </nav>',this.slideBar=this.mainSection.querySelector(\".slide-bar__slide-wrapper\"),this.pageBar=this.mainSection.querySelector(\".pagination__dot-wrapper\"),this.slidesPerPageCount=null,this.pageCount=null,this.currentSlide=null,this.currentPage=null,this.pageBarLeftLim=null,this.pageBarRightLim=null,this.onLoading=null}getCollection(e){let t=e.length;for(let i=0;i<t;i++){let t=this.addItem(e[i]);this.slideBar.appendChild(t),this.collection.push(t)}this.currentSlide||(document.querySelector(\"body\").appendChild(this.mainSection),this.currentSlide=1,this.pagination()),this.pageCount=Math.ceil(this.collection.length/this.slidesPerPageCount)}getslideSPerPageCount(){switch(this.slideBar.clientWidth){case 960:return 4;case 710:return 3;case 460:return 2;default:return 1}}pagination(e){if(this.slidesPerPageCount!=this.getslideSPerPageCount()||!e)if(this.slidesPerPageCount=this.getslideSPerPageCount(),this.pageBar.innerHTML=\"\",this.pageCount=Math.ceil(this.collection.length/this.slidesPerPageCount),this.addPageDots(1,this.pageCount),this.currentPage||null==this.currentSlide){this.currentPage=Math.floor((this.currentSlide-1)/this.slidesPerPageCount)+1,this.pageBar.querySelectorAll(\".pagination__dot\")[this.currentPage-1].classList.toggle(\"active\"),this.currentSlide=(this.currentPage-1)*this.slidesPerPageCount+1;let e=250*(this.currentSlide-1);this.slideBar.style.transform=`translateX(-${e}px)`,this.setActivePagePos()}else this.pageBar.querySelector(\":first-child\").classList.toggle(\"active\"),this.currentPage=1,this.pageBarLeftLim=0,this.pageBarRightLim=this.mainSection.querySelector(\".pagination__dot-container\").clientWidth-40}setActivePagePos(){let e=this.mainSection.querySelector(\".pagination__dot-container\").clientWidth,t=40*(this.currentPage-1),i=e/2-20;(t>this.pageBarRightLim||t<this.pageBarLeftLim)&&(this.pageBar.style.transform=`translateX(-${t-i}px)`,this.pageBarRightLim=t+i,this.pageBarLeftLim=t-i),t<i-20&&(this.pageBar.style.transform=\"translateX(0px)\",this.pageBarLeftLim=0,this.pageBarRightLim=e-40)}addPageDots(e,t){for(let i=e;i<=t;i++){let e=document.createElement(\"i\");e.classList.add(\"pagination__dot\"),e.innerText=i,this.pageBar.appendChild(e)}}pageRight(){this.onLoading||(this.currentPage<Math.ceil(this.collection.length/this.slidesPerPageCount)&&this.switchPage(1),this.pageCount-this.currentPage<2*this.slidesPerPageCount&&this.preload())}pageLeft(){this.currentSlide>1&&this.switchPage(-1)}switchPage(e){let t=250*(this.currentSlide-1);this.slideBar.style.transform=`translateX(-${t+250*e*this.slidesPerPageCount}px)`,this.currentSlide+=this.slidesPerPageCount*e,this.pageBar.querySelectorAll(\".pagination__dot\")[this.currentPage-1].classList.toggle(\"active\"),this.currentPage+=e,this.pageBar.querySelectorAll(\".pagination__dot\")[this.currentPage-1].classList.toggle(\"active\"),this.setActivePagePos()}setPage(e){this.currentSlide=(this.slidesPerPageCount,e*this.slidesPerPageCount+1),this.pagination(),this.pageCount-this.currentPage<2*this.slidesPerPageCount&&this.preload()}addItem(e){let t=document.createElement(\"figure\");return t.classList.add(\"slide\"),t.innerHTML=`\\n                      <a class=\"slide__title\" href=\"${e.url}\" target=\"_blank\">${e.title}</a>\\n                      <div class=\"slide__img-wrapper\"><img class=\"slide__preview\" src=\"${e.thumbnailUrl}\" alt=\"\"></div>\\n                      <span class=\"slide__author slide__details\"><i class=\"icon\"></i>${e.author}</span>\\n                      <span class=\"slide__publication-date slide__details\"><i class=\"icon\"></i>${e.publishedAt.toLocaleDateString(\"ru-RU\")}</span>\\n                      <span class=\"slide__view-rate slide__details\"><i class=\"icon\"></i>${e.viewCount}</span>\\n                      <span class=\"slide__description slide__details\"><i class=\"icon\"></i>${e.description}</span>\\n                      `,t}clickHandler(e){let t=e.target;\"pagination__arrow-right\"==t.classList[0]&&this.pageRight(),\"pagination__arrow-left\"==t.classList[0]&&this.pageLeft(),\"pagination__dot\"==t.classList[0]&&this.setPage(parseInt(t.innerText)-1)}free(){this.collection=[],this.currentSlide=null,this.currentPage=null,this.slidesPerPageCount=null,this.pageCount=null,this.pageBarLeftLim=null,this.pageBarRightLim=null,this.mainSection.querySelector(\".slide-bar__slide-wrapper\").innerHTML=\"\",this.mainSection.querySelector(\".pagination__dot-wrapper\").innerHTML=\"\"}preload(){this.onLoading=!0;let e=this.pageCount;request.search().then(t=>{this.getCollection(t),this.addPageDots(e+1,this.pageCount),this.onLoading=null})}}(s);new class{constructor(e,t,i,s){this.touchstartX=0,this.touchstartY=0,this.touchendX=0,this.touchendY=0,this.controlledElement=e,this.onLeftMethod=t,this.onRightMethod=i,this.touchMoveElement=s,this.touch=null}addSwipeListeners(e){e.addEventListener(\"mousedown\",e=>{this.swipeStart(e)},!1),e.addEventListener(\"mouseup\",e=>{this.swipeEnd(e)},!1),e.addEventListener(\"touchstart\",e=>{this.swipeStart(e)},!1),e.addEventListener(\"touchend\",e=>{this.swipeEnd(e)},!1),e.addEventListener(\"touchmove\",e=>{this.moveElement(e)},!1),e.addEventListener(\"mousemove\",e=>{this.moveElement(e)},!1)}swipeStart(e){this.touch=!0,this.touchstartX=e.screenX?e.screenX:e.changedTouches[0].screenX}swipeEnd(e){this.touchendX=e.screenX?e.screenX:e.changedTouches[0].screenX,this.touch=!1,this.touchMoveElement.style.cssText=\"\",this.swipeHandle()}moveElement(){if(this.touch){let e=event.screenX?event.screenX:event.changedTouches[0].screenX;this.touchMoveElement.style.transition=\"all 0s\",this.touchMoveElement.style.marginLeft=`${e-this.touchstartX}px`}}swipeHandle(){this.touchendX>this.touchstartX&&this.onLeftMethod.apply(this.controlledElement),this.touchendX<this.touchstartX&&this.onRightMethod.apply(this.controlledElement)}}(a,a.pageLeft,a.pageRight,a.slideBar).addSwipeListeners(a.slideBar);new class{constructor(e,t){this.controlledObject=e,this.optionObj=t,document.addEventListener(\"keyup\",e=>this.keybordControl(e))}keybordControl(e){const t=e.keyCode;this.optionObj[t]&&this.optionObj[t].apply(this.controlledObject)}}(a,{37:a.pageLeft,39:a.pageRight});n.render(\"body\"),n.searchForm.addEventListener(\"submit\",e=>{e.preventDefault(),s.free(),a.free(),s.search(n.getValue()).then(e=>a.getCollection(e))}),window.addEventListener(\"resize\",()=>{var e;e&&clearTimeout(e),e=setTimeout(()=>a.pagination(!0),60)}),document.addEventListener(\"click\",e=>a.clickHandler(e))}]);","extractedComments":[]}